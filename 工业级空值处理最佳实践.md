# å·¥ä¸šçº§ç©ºå€¼å¤„ç†æœ€ä½³å®è·µæŒ‡å—

## ç›®å½•
1. [æ¦‚è¿°](#æ¦‚è¿°)
2. [ä¼ ç»ŸJavaç©ºå€¼æ£€æŸ¥](#ä¼ ç»Ÿjavaç©ºå€¼æ£€æŸ¥)
3. [Java 8+ ç°ä»£ç©ºå€¼å¤„ç†](#java-8-ç°ä»£ç©ºå€¼å¤„ç†)
4. [ç¬¬ä¸‰æ–¹åº“è§£å†³æ–¹æ¡ˆ](#ç¬¬ä¸‰æ–¹åº“è§£å†³æ–¹æ¡ˆ)
5. [è®¾è®¡æ¨¡å¼åº”ç”¨](#è®¾è®¡æ¨¡å¼åº”ç”¨)
6. [ç°ä»£Javaç‰¹æ€§](#ç°ä»£javaç‰¹æ€§)
7. [å®é™…é¡¹ç›®åº”ç”¨](#å®é™…é¡¹ç›®åº”ç”¨)
8. [æœ€ä½³å®è·µæ€»ç»“](#æœ€ä½³å®è·µæ€»ç»“)
9. [åæ¨¡å¼é¿å…](#åæ¨¡å¼é¿å…)

## æ¦‚è¿°

ç©ºå€¼å¤„ç†æ˜¯å·¥ä¸šçº§Javaå¼€å‘ä¸­çš„å…³é”®è´¨é‡ä¿è¯ç‚¹ã€‚è‰¯å¥½çš„ç©ºå€¼å¤„ç†ç­–ç•¥èƒ½å¤Ÿï¼š
- æé«˜ä»£ç å¥å£®æ€§
- å‡å°‘è¿è¡Œæ—¶å¼‚å¸¸
- å¢å¼ºä»£ç å¯è¯»æ€§
- é™ä½ç»´æŠ¤æˆæœ¬

## ä¼ ç»ŸJavaç©ºå€¼æ£€æŸ¥

### åŸºç¡€ç©ºå€¼æ£€æŸ¥
```java
// åŸºæœ¬å¯¹è±¡æ£€æŸ¥
if (object != null) {
    // å®‰å…¨ä½¿ç”¨object
}

// å­—ç¬¦ä¸²ç©ºå€¼æ£€æŸ¥
if (str != null && !str.isEmpty()) {
    // ä½¿ç”¨éç©ºå­—ç¬¦ä¸²
}

// é›†åˆç©ºå€¼æ£€æŸ¥
if (list != null && !list.isEmpty()) {
    // ä½¿ç”¨éç©ºé›†åˆ
}

// æ•°ç»„ç©ºå€¼æ£€æŸ¥
if (array != null && array.length > 0) {
    // ä½¿ç”¨éç©ºæ•°ç»„
}
```

### é˜²å¾¡æ€§ç¼–ç¨‹
```java
public String processString(String input) {
    // æ–¹æ³•å…¥å£æ£€æŸ¥
    if (input == null) {
        return ""; // æä¾›é»˜è®¤å€¼
    }
    return input.trim();//å»é™¤ç©ºç™½å­—ç¬¦ï¼ŒåŒ…æ‹¬ç©ºæ ¼ (' ')ã€åˆ¶è¡¨ç¬¦ ('\t')ã€æ¢è¡Œç¬¦ ('\n')ã€å›è½¦ç¬¦ ('\r')
}

public List<String> processList(List<String> list) {
    // è¿”å›ç©ºé›†åˆè€Œä¸æ˜¯null
    if (list == null) {
        return Collections.emptyList();
    }
    return list.stream()
        .filter(Objects::nonNull)
        .collect(Collectors.toList());
}
```

## Java 8+ ç°ä»£ç©ºå€¼å¤„ç†

### Optionalç±»ï¼ˆå¼ºçƒˆæ¨èï¼‰

#### åŸºæœ¬ä½¿ç”¨
```java
import java.util.Optional;

// åˆ›å»ºOptionalï¼šåˆ›å»ºä¸€ä¸ª Optional å¯¹è±¡ï¼ŒåŒ…è£…ä¸€ä¸ªå¯èƒ½ä¸º null çš„å€¼
// å¦‚æœå€¼æ˜¯ nullï¼šè¿”å›ä¸€ä¸ªç©ºçš„ Optionalã€‚
// å¦‚æœå€¼é nullï¼šè¿”å›ä¸€ä¸ªåŒ…å«è¯¥å€¼çš„ Optionalã€‚
Optional<String> optional = Optional.ofNullable(getString());

// å®‰å…¨ä½¿ç”¨
// ifPresentä½œç”¨ï¼šå¦‚æœ Optional ä¸­æœ‰å€¼ï¼Œå°±æ‰§è¡Œä½ æä¾›çš„æ“ä½œï¼ˆæ¯”å¦‚æ‰“å°ï¼‰ã€‚
optional.ifPresent(value -> System.out.println(value));

// æä¾›é»˜è®¤å€¼
// orElseä½œç”¨ï¼šå¦‚æœ Optional æœ‰å€¼å°±è¿”å›è¯¥å€¼ï¼Œå¦åˆ™è¿”å›ä½ æä¾›çš„é»˜è®¤å€¼ã€‚
String result = optional.orElse("é»˜è®¤å€¼");

// é“¾å¼è°ƒç”¨
// filterä½œç”¨ï¼šå¯¹ Optional ä¸­çš„å€¼è¿›è¡Œæ¡ä»¶è¿‡æ»¤ã€‚å¦‚æœæ¡ä»¶ä¸æ»¡è¶³ï¼šè¿”å›ç©ºçš„ Optionalã€‚å¦‚æœæ»¡è¶³ï¼šä¿ç•™åŸå€¼ã€‚
String result = optional
    .map(String::toUpperCase)
    .filter(s -> s.length() > 3)
    .orElse("é»˜è®¤å€¼");

// æŠ›å‡ºå¼‚å¸¸
String result = optional.orElseThrow(() -> 
    new IllegalArgumentException("å€¼ä¸èƒ½ä¸ºç©º"));
```

#### é«˜çº§ç”¨æ³•
```java
// åµŒå¥—Optionalå¤„ç†
Optional<User> user = getUserById(id);//getUserById(id) è¿”å›ä¸€ä¸ª Optional<User>ï¼Œå¯èƒ½ä¸ºç©ºã€‚
String email = user
    .map(User::getProfile)//å¦‚æœæœ‰å€¼ï¼Œæå– User çš„ Profile
    .map(Profile::getEmail)//å†ä» Profile ä¸­æå– email
    .orElse("unknown@example.com");//å¦‚æœæ•´ä¸ªé“¾æ¡ä¸­ä»»ä½•ä¸€æ­¥æ˜¯ç©ºï¼Œå°±è¿”å›é»˜è®¤å€¼

// æ¡ä»¶æ‰§è¡Œ
// Optional çš„æ–°æ–¹æ³• ifPresentOrElseï¼ˆJava 9+ï¼‰ï¼Œæ¯”ä¼ ç»Ÿçš„ ifPresent æ›´å¼ºå¤§ï¼Œå› ä¸ºå®ƒåŒæ—¶å¤„ç†äº†æœ‰å€¼å’Œæ— å€¼çš„æƒ…å†µã€‚
user.ifPresentOrElse(
    u -> System.out.println("ç”¨æˆ·å­˜åœ¨: " + u.getName()),
    () -> System.out.println("ç”¨æˆ·ä¸å­˜åœ¨")
);

// è½¬æ¢å’Œè¿‡æ»¤:ä» users åˆ—è¡¨ä¸­æå–æ‰€æœ‰åˆæ³•çš„ email åœ°å€ï¼ˆéç©ºä¸”åŒ…å« @ï¼‰
List<String> validEmails = users.stream()//å°†é›†åˆè½¬æ¢æˆâ€œæµâ€ï¼Œä»¥ä¾¿è¿›è¡Œé“¾å¼å¤„ç†
    .map(User::getEmail)//è¿”å› Optional<String>
    .filter(Optional::isPresent)//è¿‡æ»¤æ‰ç©ºçš„ Optional
    .map(Optional::get)//æå–å‡ºçœŸæ­£çš„ email å­—ç¬¦ä¸²
    .filter(email -> email.contains("@"))//è¿‡æ»¤æ‰ä¸åˆæ³•çš„ email
    .collect(Collectors.toList());//æ”¶é›†æˆ List
```

### Objectså·¥å…·ç±»
```java
import java.util.Objects;

// ç©ºå€¼æ£€æŸ¥
if (Objects.nonNull(obj)) {
    // ä½¿ç”¨obj
}

// ç©ºå€¼å®‰å…¨æ¯”è¾ƒ
boolean equal = Objects.equals(obj1, obj2);
// æºç å¦‚ä¸‹ï¼š
public static boolean equals(Object a, Object b) {
    return (a == b) || (a != null && a.equals(b));
}
// ç©ºå€¼å®‰å…¨å“ˆå¸Œ
int hash = Objects.hash(obj1, obj2, obj3);

// ç©ºå€¼å®‰å…¨toString
String str = Objects.toString(obj, "é»˜è®¤å€¼");
```

## ç¬¬ä¸‰æ–¹åº“è§£å†³æ–¹æ¡ˆ

### Apache Commons Lang
```java
import org.apache.commons.lang3.StringUtils;
import org.apache.commons.lang3.ObjectUtils;

// å­—ç¬¦ä¸²ç©ºå€¼æ£€æŸ¥
if (StringUtils.isNotBlank(str)) {
    // ä½¿ç”¨éç©ºå­—ç¬¦ä¸²
}

// å¯¹è±¡ç©ºå€¼æ£€æŸ¥
if (ObjectUtils.isNotEmpty(obj)) {
    // ä½¿ç”¨éç©ºå¯¹è±¡
}

// ç©ºå€¼å®‰å…¨æ–¹æ³•
String result = StringUtils.defaultIfBlank(input, "é»˜è®¤å€¼");
```

### Google Guava
```java
import com.google.common.base.Strings;
import com.google.common.base.Preconditions;
import com.google.common.base.Optional;

// å­—ç¬¦ä¸²ç©ºå€¼å¤„ç†
String result = Strings.nullToEmpty(input);

// å‰ç½®æ¡ä»¶æ£€æŸ¥
Preconditions.checkNotNull(obj, "å¯¹è±¡ä¸èƒ½ä¸ºç©º");
Preconditions.checkArgument(!Strings.isNullOrEmpty(str), "å­—ç¬¦ä¸²ä¸èƒ½ä¸ºç©º");

// Guavaçš„Optionalï¼ˆJava 8ä¹‹å‰ä½¿ç”¨ï¼‰
Optional<String> optional = Optional.fromNullable(getString());
```

### Spring Framework
```java
import org.springframework.util.StringUtils;
import org.springframework.util.CollectionUtils;

// Springçš„ç©ºå€¼æ£€æŸ¥
if (StringUtils.hasText(str)) {
    // ä½¿ç”¨éç©ºå­—ç¬¦ä¸²
}

if (!CollectionUtils.isEmpty(list)) {
    // ä½¿ç”¨éç©ºé›†åˆ
}
```

## è®¾è®¡æ¨¡å¼åº”ç”¨

### ç©ºå¯¹è±¡æ¨¡å¼ï¼ˆNull Object Patternï¼‰
```java
// å®šä¹‰ç©ºå¯¹è±¡æ¥å£
public interface ListNode {
    int getVal();
    ListNode getNext();
    boolean isEmpty();
    String toString();
}

// ç©ºå¯¹è±¡å®ç°
public class EmptyListNode implements ListNode {
    @Override
    public int getVal() {
        return 0;
    }
    
    @Override
    public ListNode getNext() {
        return this; // è¿”å›è‡ªå·±
    }
    
    @Override
    public boolean isEmpty() {
        return true;
    }
    
    @Override
    public String toString() {
        return "[]";
    }
}

// æ­£å¸¸å®ç°
public class ConcreteListNode implements ListNode {
    private final int val;
    private final ListNode next;
    
    public ConcreteListNode(int val, ListNode next) {
        this.val = val;
        this.next = next != null ? next : new EmptyListNode();
    }
    
    @Override
    public boolean isEmpty() {
        return false;
    }
    
    // ... å…¶ä»–æ–¹æ³•å®ç°
}
```

### å»ºé€ è€…æ¨¡å¼ + ç©ºå€¼æ£€æŸ¥
```java
public class ListNodeBuilder {
    private int val;
    private ListNode next;
    
    public ListNodeBuilder val(int val) {
        this.val = val;
        return this;
    }
    
    public ListNodeBuilder next(ListNode next) {
        this.next = next;
        return this;
    }
    
    public ListNode build() {
        // æ„å»ºæ—¶è¿›è¡Œç©ºå€¼æ£€æŸ¥
        if (next == null) {
            return new ConcreteListNode(val, new EmptyListNode());
        }
        return new ConcreteListNode(val, next);
    }
}
```

## ç°ä»£Javaç‰¹æ€§

### è®°å½•ç±»ï¼ˆRecordï¼‰çš„ç©ºå€¼å¤„ç†
```java
public record ListNodeRecord(int val, ListNodeRecord next) {
    public ListNodeRecord {
        // ç´§å‡‘æ„é€ å‡½æ•°ä¸­çš„éªŒè¯
        if (val < 0) {
            throw new IllegalArgumentException("å€¼ä¸èƒ½ä¸ºè´Ÿæ•°");
        }
    }
    
    public Optional<ListNodeRecord> getNext() {
        return Optional.ofNullable(next);
    }
    
    public boolean hasNext() {
        return next != null;
    }
}
```

### æ¨¡å¼åŒ¹é…ï¼ˆJava 17+ï¼‰
```java
public String processNode(Object obj) {
    return switch (obj) {
        case null -> "ç©ºå€¼";
        case ListNode node -> "é“¾è¡¨èŠ‚ç‚¹: " + node.getVal();
        case String str when !str.isEmpty() -> "éç©ºå­—ç¬¦ä¸²: " + str;
        case String str -> "ç©ºå­—ç¬¦ä¸²";
        default -> "æœªçŸ¥ç±»å‹";
    };
}
```

### æ–‡æœ¬å—ï¼ˆJava 15+ï¼‰
```java
public String generateReport(Object data) {
    return Optional.ofNullable(data)
        .map(d -> """
            æ•°æ®æŠ¥å‘Š:
            ç±»å‹: %s
            å€¼: %s
            æ—¶é—´: %s
            """.formatted(
                d.getClass().getSimpleName(),
                d.toString(),
                LocalDateTime.now()
            ))
        .orElse("æ— æ•°æ®å¯æŠ¥å‘Š");
}
```

## å®é™…é¡¹ç›®åº”ç”¨

### æ”¹è¿›çš„ListNodeç±»
```java
public static class ListNode {
    private final int val;
    private final ListNode next;
    
    // ç§æœ‰æ„é€ å‡½æ•°ï¼Œå¼ºåˆ¶ä½¿ç”¨å·¥å‚æ–¹æ³•
    private ListNode(int val, ListNode next) {
        this.val = val;
        this.next = next;
    }
    
    // å·¥å‚æ–¹æ³•ï¼Œå†…ç½®ç©ºå€¼æ£€æŸ¥
    public static ListNode of(int val) {
        return new ListNode(val, null);
    }
    
    public static ListNode of(int val, ListNode next) {
        return new ListNode(val, next);
    }
    
    // å®‰å…¨çš„è®¿é—®æ–¹æ³•
    public Optional<ListNode> getNext() {
        return Optional.ofNullable(next);
    }
    
    public boolean hasNext() {
        return next != null;
    }
    
    // å®‰å…¨çš„toString
    @Override
    public String toString() {
        return toStringWithLimit(20); // é™åˆ¶é•¿åº¦é˜²æ­¢æ— é™å¾ªç¯
    }
    
    private String toStringWithLimit(int limit) {
        StringBuilder sb = new StringBuilder();
        ListNode current = this;
        int count = 0;
        
        while (current != null && count < limit) {
            sb.append(current.val);
            if (current.hasNext()) {
                sb.append(" -> ");
            }
            current = current.next;
            count++;
        }
        
        if (current != null) {
            sb.append("...");
        }
        
        return sb.toString();
    }
}
```

### æœåŠ¡å±‚ç©ºå€¼å¤„ç†
```java
@Service
public class UserService {
    
    public Optional<User> findUserById(Long id) {
        return Optional.ofNullable(id)
            .filter(i -> i > 0)
            .map(userRepository::findById)
            .orElse(Optional.empty());
    }
    
    public User createUser(UserRequest request) {
        return Optional.ofNullable(request)
            .filter(req -> StringUtils.hasText(req.getName()))
            .map(req -> User.builder()
                .name(req.getName())
                .email(req.getEmail())
                .build())
            .orElseThrow(() -> new IllegalArgumentException("æ— æ•ˆçš„ç”¨æˆ·è¯·æ±‚"));
    }
}
```

### æ§åˆ¶å™¨å±‚ç©ºå€¼å¤„ç†
```java
@RestController
public class UserController {
    
    @GetMapping("/users/{id}")
    public ResponseEntity<UserResponse> getUser(@PathVariable Long id) {
        return userService.findUserById(id)
            .map(user -> ResponseEntity.ok(UserResponse.from(user)))
            .orElse(ResponseEntity.notFound().build());
    }
    
    @PostMapping("/users")
    public ResponseEntity<UserResponse> createUser(@RequestBody UserRequest request) {
        try {
            User user = userService.createUser(request);
            return ResponseEntity.ok(UserResponse.from(user));
        } catch (IllegalArgumentException e) {
            return ResponseEntity.badRequest().build();
        }
    }
}
```

## æœ€ä½³å®è·µæ€»ç»“

### æ¨èç­–ç•¥ï¼ˆæŒ‰ä¼˜å…ˆçº§ï¼‰

1. **Optionalç±»** - ç°ä»£Javaæ ‡å‡†
   - ç”¨äºæ–¹æ³•è¿”å›å€¼
   - é“¾å¼è°ƒç”¨å¤„ç†
   - é¿å…è¿”å›null

2. **é˜²å¾¡æ€§ç¼–ç¨‹** - åœ¨æ–¹æ³•å…¥å£æ£€æŸ¥
   - å‚æ•°éªŒè¯
   - æä¾›é»˜è®¤å€¼
   - æ—©æœŸè¿”å›

3. **ç©ºå¯¹è±¡æ¨¡å¼** - é¿å…è¿”å›null
   - å®šä¹‰ç©ºå¯¹è±¡å®ç°
   - ç»Ÿä¸€æ¥å£å¤„ç†
   - å‡å°‘nullæ£€æŸ¥

4. **ç¬¬ä¸‰æ–¹åº“** - Apache Commonsã€Guava
   - å·¥å…·ç±»æ–¹æ³•
   - å‰ç½®æ¡ä»¶æ£€æŸ¥
   - ç©ºå€¼å®‰å…¨æ“ä½œ

5. **å‰ç½®æ¡ä»¶æ£€æŸ¥** - ä½¿ç”¨æ–­è¨€æˆ–Preconditions
   - æ–¹æ³•å…¥å£éªŒè¯
   - å¿«é€Ÿå¤±è´¥åŸåˆ™
   - æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯

### æ€§èƒ½è€ƒè™‘

```java
// æ€§èƒ½ä¼˜åŒ–çš„ç©ºå€¼æ£€æŸ¥
public boolean isNotEmpty(String str) {
    return str != null && !str.isEmpty();
}

// ä½¿ç”¨Objects.requireNonNullè¿›è¡Œå¿«é€Ÿå¤±è´¥
public void processObject(Object obj) {
    Objects.requireNonNull(obj, "å¯¹è±¡ä¸èƒ½ä¸ºç©º");
    // å¤„ç†é€»è¾‘
}

// æ‰¹é‡ç©ºå€¼æ£€æŸ¥
public boolean allNotNull(Object... objects) {
    return Arrays.stream(objects).noneMatch(Objects::isNull);
}
```

## åæ¨¡å¼é¿å…

### âŒ ä¸å¥½çš„åšæ³•
```java
// æ·±å±‚åµŒå¥—æ£€æŸ¥
if (obj != null && obj.method() != null && obj.method().getValue() != null) {
    // ä½¿ç”¨obj.method().getValue()
}

// è¿”å›null
public String getValue() {
    if (condition) {
        return "value";
    }
    return null; // é¿å…è¿™æ ·åš
}

// å¿½ç•¥ç©ºå€¼
public void process(String str) {
    str.toUpperCase(); // å¯èƒ½æŠ›å‡ºNPE
}
```

### âœ… å¥½çš„åšæ³•
```java
// ä½¿ç”¨Optionalé“¾å¼è°ƒç”¨
Optional.ofNullable(obj)
    .map(Object::method)
    .map(Method::getValue)
    .ifPresent(value -> {
        // ä½¿ç”¨value
    });

// è¿”å›Optionalæˆ–ç©ºå¯¹è±¡
public Optional<String> getValue() {
    if (condition) {
        return Optional.of("value");
    }
    return Optional.empty();
}

// é˜²å¾¡æ€§ç¼–ç¨‹
public void process(String str) {
    Optional.ofNullable(str)
        .map(String::toUpperCase)
        .ifPresent(System.out::println);
}
```

## å·¥å…·å’ŒIDEæ”¯æŒ

### IDEæ’ä»¶æ¨è
- **SpotBugs** - é™æ€ä»£ç åˆ†æ
- **SonarQube** - ä»£ç è´¨é‡æ£€æŸ¥
- **IntelliJ IDEA** - å†…ç½®ç©ºå€¼æ£€æŸ¥
- **Eclipse** - ç©ºå€¼åˆ†æå·¥å…·

### ä»£ç æ£€æŸ¥è§„åˆ™
```java
// ä½¿ç”¨@NonNullå’Œ@Nullableæ³¨è§£
public void process(@NonNull String input, @Nullable String optional) {
    // IDEä¼šæä¾›ç©ºå€¼æ£€æŸ¥æç¤º
}

// ä½¿ç”¨@SuppressWarningsæŠ‘åˆ¶è­¦å‘Š
@SuppressWarnings("null")
public void legacyMethod() {
    // é—ç•™ä»£ç å¤„ç†
}
```

## æ€»ç»“

å·¥ä¸šçº§ç©ºå€¼å¤„ç†çš„æ ¸å¿ƒåŸåˆ™ï¼š
1. **é¢„é˜²èƒœäºæ²»ç–—** - åœ¨æºå¤´é¿å…null
2. **æ˜ç¡®æ„å›¾** - ä½¿ç”¨Optionalè¡¨è¾¾å¯èƒ½ä¸ºç©º
3. **å¿«é€Ÿå¤±è´¥** - å°½æ—©å‘ç°å’Œå¤„ç†ç©ºå€¼
4. **ä¸€è‡´æ€§** - åœ¨æ•´ä¸ªé¡¹ç›®ä¸­ä¿æŒç»Ÿä¸€çš„ç©ºå€¼å¤„ç†ç­–ç•¥
5. **å¯è¯»æ€§** - ä»£ç åº”è¯¥æ¸…æ¥šåœ°è¡¨è¾¾ç©ºå€¼å¤„ç†é€»è¾‘

é€šè¿‡éµå¾ªè¿™äº›æœ€ä½³å®è·µï¼Œå¯ä»¥æ˜¾è‘—æé«˜Javaä»£ç çš„å¥å£®æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚

# ğŸ“Š Java Stream æµç¨‹å›¾æ¨¡æ‹Ÿï¼šæå–åˆæ³• Email

## è¾“å…¥é›†åˆï¼šList<User> users

æ¯ä¸ª User å¯¹è±¡ç»“æ„å¦‚ä¸‹ï¼š
- name: String
- email: Optional<String>

---

## ğŸ”„ æµç¨‹å›¾æ­¥éª¤

1ï¸âƒ£ users.stream()  
â€ƒâ€ƒâ¬‡ï¸ å°† List<User> è½¬æ¢ä¸º Stream<User>ï¼ˆæ‡’åŠ è½½ï¼‰

2ï¸âƒ£ map(User::getEmail)  
â€ƒâ€ƒâ¬‡ï¸ å¯¹æ¯ä¸ª User è°ƒç”¨ getEmail()  
â€ƒâ€ƒâ¡ï¸ å¾—åˆ° Stream<Optional<String>>

3ï¸âƒ£ filter(Optional::isPresent)  
â€ƒâ€ƒâ¬‡ï¸ è¿‡æ»¤æ‰ Optional.empty()  
â€ƒâ€ƒâ¡ï¸ å¾—åˆ° Stream<Optional<String>>ï¼ˆåªä¿ç•™éç©ºï¼‰

4ï¸âƒ£ map(Optional::get)  
â€ƒâ€ƒâ¬‡ï¸ æå– Optional ä¸­çš„å€¼  
â€ƒâ€ƒâ¡ï¸ å¾—åˆ° Stream<String>

5ï¸âƒ£ filter(email -> email.contains("@"))  
â€ƒâ€ƒâ¬‡ï¸ è¿‡æ»¤æ‰ä¸åŒ…å« @ çš„ email  
â€ƒâ€ƒâ¡ï¸ å¾—åˆ°åˆæ³• email çš„ Stream<String>

6ï¸âƒ£ collect(Collectors.toList())  
â€ƒâ€ƒâ¬‡ï¸ æ”¶é›†ç»“æœä¸º List<String>  
â€ƒâ€ƒâœ… è¾“å‡ºåˆæ³• email åˆ—è¡¨

---

## ğŸ§  å¯è§†åŒ–ç±»æ¯”ï¼ˆæ•°æ®æµåŠ¨ï¼‰

```text
[User1] â”€â”€â–¶ getEmail() â”€â”€â–¶ Optional.of("a@b.com") â”€â”€â–¶ ä¿ç•™ â”€â”€â–¶ "a@b.com" â”€â”€â–¶ åˆæ³• â”€â”€â–¶ âœ…  
[User2] â”€â”€â–¶ getEmail() â”€â”€â–¶ Optional.empty()       â”€â”€â–¶ ä¸¢å¼ƒ â”€â”€â–¶ âœ˜  
[User3] â”€â”€â–¶ getEmail() â”€â”€â–¶ Optional.of("abc")     â”€â”€â–¶ ä¿ç•™ â”€â”€â–¶ "abc"     â”€â”€â–¶ éæ³• â”€â”€â–¶ âœ˜  
[User4] â”€â”€â–¶ getEmail() â”€â”€â–¶ Optional.of("x@y.com") â”€â”€â–¶ ä¿ç•™ â”€â”€â–¶ "x@y.com" â”€â”€â–¶ åˆæ³• â”€â”€â–¶ âœ…  
